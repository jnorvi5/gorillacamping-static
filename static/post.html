<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Meta tags, title, etc. -->
    <script src="/js/config.js"></script>
</head>
<body>
    <!-- Header, navigation, etc. -->
    <article class="blog-post" id="blog-post">
        <div class="loading-container">
            <div class="loading-spinner"></div>
            <p>Loading post...</p>
        </div>
    </article>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        function getSlug() {
            const parts = window.location.pathname.split('/');
            return parts[parts.length - 1];
        }
        
        fetch(`${CONFIG.API_URL}/api/blog-post/${getSlug()}`)
            .then(res => {
                if (!res.ok) throw new Error('Network response failed');
                return res.json();
            })
            .then(post => {
                if (post.error) {
                    document.getElementById('blog-post').innerHTML = '<h1>Post Not Found</h1><p>Sorry, this post doesn\'t exist or has been moved.</p>';
                    document.title = "Post Not Found | Gorilla Camping";
                    return;
                }
                
                document.getElementById('blog-post').innerHTML = `
                    <h1>${post.title}</h1>
                    <p class="meta">Published on ${post.created_at}${post.author ? ` by ${post.author}` : ''}</p>
                    <div class="content">${post.content}</div>
                `;
                
                document.title = `${post.title} | Gorilla Camping`;
                document.querySelector('meta[name="description"]').setAttribute('content', post.meta_description || '');
            })
            .catch(error => {
                document.getElementById('blog-post').innerHTML = '<h1>Error Loading Post</h1><p>Sorry, there was a problem loading this post. Please try again later.</p>';
                console.error('Error fetching blog post:', error);
            });
    });
    </script>
</body>
</html>
